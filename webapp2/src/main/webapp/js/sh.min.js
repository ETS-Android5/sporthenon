function fillPicklistXML(e){var t=null!=e?e.responseXML:pl.outerHTML;if(t){var a=t.documentElement,l=a.getAttribute("id"),r=$(l),s=a.getElementsByTagName("item");if(s.length>0){for(var n=new Array,i=null,d=0;d<s.length;d++)i=s[d],n.push('<option value="'+i.getAttribute("value")+'">'+i.getAttribute("text")+"</option>");l.split(",").each(function(e){$(e)&&($(e).update(n.join("")),$(e).removeClassName("disabled"),$(e).writeAttribute("disabled",null))}),updateTip(l),updateSelectMult(l)}else r.update(""),r.addClassName("disabled"),r.writeAttribute("disabled","disabled"),updateTip(l,!0);r.onchange&&r.onchange()}}function fillPicklistArray(e,t){var a=$(e);if(t.length>0){for(var l=new Array,r=0;r<t.length;r++)l.push('<option value="'+t[r].value+'">'+t[r].text+"</option>");e.split(",").each(function(e){$(e)&&($(e).update(l.join("")),$(e).removeClassName("disabled"),$(e).writeAttribute("disabled",null))}),updateTip(e),updateSelectMult(e)}else a.update(""),a.addClassName("disabled"),a.writeAttribute("disabled","disabled"),updateTip(e,!0);a.onchange&&a.onchange()}var hTips=new Hash;function createTip(e,t){$(document.body).insert(new Element("div",{id:e})),new Control.Window($(document.body).down("[href=#"+e+"]"),{position:"relative",hover:!0,offsetLeft:-5,offsetTop:25,className:"tip"}),hTips.set(t,e),updateTip(t)}function updateTip(e,t){if(0!=hTips.size()&&hTips.get(e)){var a=TX_CURRENTLY_SELECTED+":";if(t)a="";else{var l=$(e).value.split(",");if(0==l[0])a+="<br/>["+TX_ALL+"]";else{var r=new Hash;$$("#"+e+" option").each(function(e){r.set(e.value,e.text)});for(var s=0;s<l.length&&s<10;s++)a+="<br/>- "+r.get(l[s]);a+=l.length>10?"<br/>(+"+(l.length-10)+" more)":""}a+='<br/><br/><span class="bold">('+TX_CLICK_CHANGE+")</span>"}$(hTips.get(e)).update(a)}}function handleRender(){var e=$$("#content .infostats")[0];$$("#content .rendertip").each(function(e){$("treeresults")?$(e).previous("a").title=e.innerHTML:new Control.Window($(document.body).down("[href=#"+e.id+"]"),{position:"relative",hover:!0,offsetLeft:20,offsetTop:28,className:"tip"})}),t2=currentTime();var t=elapsedTime(t1,t2);(e&&e.update(e.innerHTML.replace("#DTIME#",t)),$("loadtime")&&($("loadtime").down("span").update(t),$("loadtime").show()),$("favimg"))&&(isFavorite($$("#content .url")[0].innerHTML)?($("favimg").onclick=function(){deleteFavorite()},$("favimg").src="/img/menu/favorites.png",$("favimg").title=TX_DELFAV):($("favimg").onclick=function(){addFavorite()},$("favimg").src="/img/menu/favorites2.png",$("favimg").title=TX_ADDFAV))}function toggleContent(e){"IMG"!=e.tagName&&(e=$(e).previous("img"));var t=-1!=e.src.indexOf("collapse.png"),a=$(e).up("div").next("table");$(a)||(a=$(e).up("div").next("div")),t?a.hide():a.show(),e.src="/img/render/"+(t?"expand.png":"collapse.png")+"?v="+VERSION+"_2"}function info(e){window.location.href="/results/"+e}function currentTime(){return(new Date).getTime()}function replaceAll(e,t,a){for(;-1!=e.indexOf(t);)e=e.replace(t,a);return e}function moreItems(e,t){var a=$(e).up();a.update('<img src="/img/db/loading.gif?6"/>'),a.style.backgroundColor="#FFF",new Ajax.Request("/entity/more/"+t,{onSuccess:function(e){$(a).up("tbody").insert(e.responseText),$(a).up("tr").remove()}})}function togglePlist(e,t){"none"==$(t).style.display?($(t).show(),e.src="/img/render/minus.png?v="+VERSION):($(t).hide(),e.src="/img/render/plus.png?v="+VERSION)}function winrecMore(e){for(var t=$(e).up("table").down(".hidden");null!=t;)t.removeClassName("hidden"),t=t.next();$(e).remove()}var tCurrentSortedCol=[];function sort(e,t,a){for(var l=$(t).hasClassName("asc"),r=[],s=[],n=null,i=null,d=0,u=null,o=$("tb-"+e),c=o.down("tr"),p=o.down(".moreitems");null!=c;){if(i=$(c).down(".srt",a)){if(n=(n=i.id&&""!=i.id?i.id:i.innerHTML).replace("-","").replace(/(<\s*\/?\s*)\s*(\s*([^>]*)?\s*>)/gi,""),!isNaN(n)){for(u=n+"";u.length<10;)u="0"+u;n=u}if(n+="-"+d++,s.push(n),r[n]=c.outerHTML,i.getAttribute("rowspan"))for(var m=0;m<parseInt(i.getAttribute("rowspan"));m++)c=c.next(),r[n]+=c.outerHTML}c=c.next()}var v=[];s.sort().each(function(e){v.push(r[e])}),o.update(l?v.reverse().join(""):v.join("")),null!=p&&o.insert(p),null!=tCurrentSortedCol[e]&&$(tCurrentSortedCol[e]).removeClassName("sorted").removeClassName("asc").removeClassName("desc"),l?$(t).removeClassName("asc").addClassName("desc"):$(t).removeClassName("desc").addClassName("asc"),$(t).addClassName("sorted"),tCurrentSortedCol[e]=t}function moreImg(e){$$("."+e).each(function(e){e.show()}),$(e+"-link").hide()}function addFavorite(){var e=getCookie("shfav"),t=$$("#content .url")[0].innerHTML;t=(t=t.replace("http://","").replace("https://","")).substring(t.indexOf("/")).replace("&amp;","&");var a=document.title.replace(" | Sporthenon","");setCookie("shfav",e+="|"+t+":"+(a=a.replace(/\&nbsp\;/gi," "))),$("favimg")&&($("favimg").onclick=function(){deleteFavorite()},$("favimg").src="/img/menu/favorites.png",$("favimg").title=TX_DELFAV)}function deleteFavorite(e){e||(e=$$("#content .url")[0].innerHTML),e=(e=e.replace("http://","").replace("https://","")).substring(e.indexOf("/"));for(var t=getCookie("shfav").split("|"),a=[],l=0;l<t.length;l++)0!=t[l].indexOf(e)&&a.push(t[l]);setCookie("shfav",a.join("|")),$("favimg")&&($("favimg").onclick=function(){addFavorite()},$("favimg").src="/img/menu/favorites2.png",$("favimg").title=TX_ADDFAV)}function deleteFavClick(e){deleteFavorite($("fav-"+e).down("a").href),$("fav-"+e).remove()}function isFavorite(e){e=(e=e.replace("http://","").replace("https://","")).substring(e.indexOf("/")).replace("&amp;","&");for(var t=!1,a=getCookie("shfav").split("|"),l=0;l<a.length;l++&&!t)0==a[l].indexOf(e)&&(t=!0);return t}function toggle(e){var t=$("img-"+e);"none"==$(e).style.display?($(e).show(),t.src=t.src.replace("expand","collapse")+"?v="+VERSION):($(e).hide(),t.src=t.src.replace("collapse","expand")+"?v="+VERSION)}var currentExpPhoto=null;function thumbnailClick(e){null==currentExpPhoto&&(currentExpPhoto=$$(".info img")[0].id),$(e).style.width=$(currentExpPhoto).style.width,$(e).style.height=$(currentExpPhoto).style.height,$(e).title=TX_ENLARGE,$("link-"+e).href=IMG_URL+e,$(currentExpPhoto).style.width="50px",$(currentExpPhoto).style.height="50px",$(currentExpPhoto).title="",$("link-"+currentExpPhoto).href='javascript:thumbnailClick("'+currentExpPhoto+'");',currentExpPhoto=e}function showFavorites(){$$("#content .selmultiple").each(function(e){$(e).style.visibility="hidden"}),$("favorites").show()}function hideFavorites(){$$("#content .selmultiple").each(function(e){$(e).style.visibility="visible"}),$("favorites").hide()}function enlargePhoto(e){var t=$("ph-"+e),a=$("dpicture-div");if(a.style.paddingLeft="8px",0==t.innerHTML.indexOf("<img")){var l=t.getElementsByTagName("img")[0];a.style.width="auto",a.style.height="auto";var r=l.outerHTML;""!=l.alt&&(r+='<div class="source">'+l.alt+"</div>",a.style.paddingLeft="15px"),a.update(r),dPicture.open()}else new Ajax.Request("/ImageServlet?load&directid="+e,{onComplete:function(e){var l=e.responseText,r=t.getElementsByTagName("iframe")[0];a.style.width=r.width+"px",a.style.height=r.height+"px",a.update(l),dPicture.open()}});setOpacity(.4)}var t1=null,t2=null;function elapsedTime(e,t){return(t-e)/1e3}function backTop(){Effect.ScrollTo("header",{duration:.5})}function setCookie(e,t){var a=new Date;a.setTime(a.getTime()+31536e7),document.cookie=e+"="+t+"; expires="+a.toUTCString()+";path=/"}function getCookie(e){e+="=";for(var t=document.cookie.split(";"),a=0;a<t.length;a++){for(var l=t[a];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(e))return l.substring(e.length,l.length)}return""}function setOpacity(e){$("header").setStyle({opacity:e}),$("footer").setStyle({opacity:e}),$("content").setStyle({opacity:e})}function closeDialog(e){e.close(),setOpacity(1)}var dError=null,dPicture=null,dLink=null,dInfo=null,dPersonList=null,dRound=null,dFind=null,dQuestion=null,dComment=null,dHelp=null;function share(e){var t=$$("#content .url")[0].innerHTML;"fb"==e?t="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(t):"tw"==e?t="https://twitter.com/share?url="+encodeURIComponent(t):"lnk"==e?t="https://www.linkedin.com/sharing/share-offsite/?url="+encodeURIComponent(t):"bg"==e?t="https://www.blogger.com/blog-this.g?u="+encodeURIComponent(t)+"&n="+escape(document.title):"tm"==e&&(t="http://tumblr.com/share?&u="+encodeURIComponent(t)),$("shareopt").hide(),window.open(t,"_blank")}function exportPage(e){var t=$$("#content .url")[0].innerHTML;t&&(location.href=t+"?export="+e,$("exportopt").hide())}function displayErrorReport(){var e=$$("#content .url")[0].innerHTML;setOpacity(.4),$("errlinkurl").value=e,$("errlinktext").value="",dError.open(),$("errlinktext").focus()}function displayLink(){var e=$$("#content .url")[0].innerHTML;dLink&&e&&(setOpacity(.4),dLink.open(),$("linktxt").value=e.replace("&amp;","&"),$("linktxt").select(),$("linktxt").focus())}function displayInfo(){var e=$$("#content .infostats")[0].innerHTML.split("|"),t=$$("#d-info td");t[0].update(e[0]+" "+TX_KB),t[1].update(e[1]+" "+TX_SECONDS),t[2].update(e[2]),t[3].update("fr"==e[3]?"Français":"English"),t[3].className="lang-"+e[3],t[4].update(e[4]),setOpacity(.4),dInfo.open()}function printCurrentTab(){var e=$$("#content .url")[0].innerHTML;e&&window.open(e+"?print","_blank")}function saveError(){const e=$F("errlinkurl");var t=$H({url:e,text:$F("errlinktext")});new Ajax.Request("/IndexServlet?error=1",{onSuccess:function(t){window.location.href=e},parameters:t}),closeDialog(dError)}var hSliders=new Hash;function sliderLinkOver(){}function sliderLinkOut(){}function handleSliderArr(e){}function createSlider(e,t,a,l){var r=$$("#"+e+" .container")[0],s=$$("#"+e+" .slide"),n=$$("#"+e+" .slider-control");return r.down().style.width="50000px",r.setStyle({width:t+"px",height:a+"px"}),s.each(function(e){e.setStyle({width:t+"px",height:a+"px"})}),n.each(function(e){Event.observe(e,"mouseover",sliderLinkOver),Event.observe(e,"mouseout",sliderLinkOut)}),hSliders.set(e,new Carousel(r,s,n,{duration:.4,circular:!!l,afterMove:l?null:function(){handleSliderArr(e)}})),l||handleSliderArr(e),hSliders.get(e)}var hSelMult=$H();function initSelectMult(e,t,a,l){$(e).down(4).writeAttribute("id",e.replace("sm-",""));var r=$$("#"+e+" .optcontainer")[0],s=$$("#"+e+" a")[0],n=$$("#"+e+" input.button"),i=n[1],d=n[0],u=$$("#"+e+" .applyall label")[0],o=$$("#"+e+" .applyall input")[0];e=e.replace("sm-",""),r.writeAttribute("id",e+"-options"),u.writeAttribute("for",e+"-applyall"),o.writeAttribute("id",e+"-applyall"),r.down().innerHTML=TX_SELECT+": "+t,$(e).setStyle({width:a+"px"}),r.setStyle({width:a+(l||20)+"px"}),s.writeAttribute("href","#tip-"+e),createTip("tip-"+e,e);var c=new Control.SelectMultiple(e,e+"-options",{checkboxSelector:".scroll tr td input[type=checkbox]",nameSelector:".scroll tr td.name",afterChange:function(){this.setSelectedRows&&this.setSelectedRows()}});s.observe("click",function(t){if(!$(this.select).disabled){$(this.select).style.visibility="hidden",this.set(),new Effect.BlindDown(this.container,{duration:.4}),Event.stop(t);var a=0==$(this.select).value;if($(e+"-applyall").checked=a,a){var l=0;this.checkboxes.each(function(e){e.checked=!0,++l==this.checkboxes.length&&this.checkboxOnClick(e)}.bind(c))}return!1}}.bindAsEventListener(c)),i.observe("click",function(t){return $(this.select).style.visibility="visible",$(e).onchange&&$(e).onchange(),new Effect.BlindUp(this.container,{duration:.4}),!1}.bindAsEventListener(c)),d.observe("click",function(e){return $(this.select).style.visibility="visible",this.reset(),new Effect.BlindUp(this.container,{duration:.4}),Event.stop(e),!1}.bindAsEventListener(c)),$(o).observe("click",function(t){var a=$(e+"-applyall").checked,l=0;return this.checkboxes.each(function(e){e.checked=a,++l==this.checkboxes.length&&this.checkboxOnClick(e)}.bind(c)),!1}.bindAsEventListener(c)),hSelMult.set(e,c)}function updateSelectMult(e){if(0!=hSelMult.size()&&hSelMult.get(e)){var t=hSelMult.get(e);if(t){var a=[""],l=0;$$("#"+e+" option").each(function(t){t.value>0&&a.push('<tr><td id="'+e+"-"+l+++'" class="name">'+t.text+'</td><td><input type="checkbox" value="'+t.value+'"/></td></tr>')}),$$("#"+e+"-options .scroll table")[0].update(a.join("")),$$("#"+e+"-options .scroll tr").each(function(e){e.down().observe("click",selMultClick),e.observe("mouseover",function(){this.addClassName("over")}),e.observe("mouseout",function(){this.removeClassName("over")})}),t.initialize(t.select,t.container,t.options),t.setSelectedRows=function(){this.checkboxes.each(function(e){var t=$(e.parentNode.parentNode);t.removeClassName("selected"),e.checked&&t.addClassName("selected")})}.bind(t),t.checkboxes.each(function(e){$(e).observe("click",t.setSelectedRows)}),t.setSelectedRows()}}}function selMultClick(){var e=this.id,t=hSelMult.get(e.replace(/-\d+/,"")),a=t.checkboxes[e.replace(/[^\d]+/,"").replace("2-","")];a.checked=!a.checked,t.checkboxOnClick(a)}function moreSports(e,t){for(var a=e;a<=t;a++)$("sport-"+a).show();$$("#sports .otherimglink").each(function(e){$(e).hide()}),$("more-"+e+"-"+t).show()}function initSliderHome(e){$$("#sports .content")[0].update(e),createSlider("sports",1090,120,!0)}function getLastUpdates(e,t,a){var l=$("tlast").down("tbody"),r=null;null!=e?((r=$(e).up()).update('<img src="/img/db/loading.gif?6"/>'),r.style.backgroundColor="#FFF"):$("dupdates-loading").show(),new Ajax.Request("/IndexServlet?"+(null!=t?"p="+t:"")+(null!=a?"sport="+a:"")+"&lastupdates&t="+currentTime(),{onSuccess:function(e){null!=r?($(r).up("tbody").insert(e.responseText),$(r).up("tr").remove()):($("dupdates-loading").hide(),l.update(e.responseText))}})}function getRandomEvent(){new Ajax.Updater($("randomeventvalue"),"/IndexServlet?randomevent&t="+currentTime())}var cindex=0,cmax=1,cdata=[],clabel=[],ccolor=[["Gradient(#ff8b6b:#ff3900)"],["Gradient(#ff8b6b:#ff3900)"]];function loadReport(e,t,a){$("chart").update('<canvas id="cvs" width="720" height="400"></canvas>'),0!=cindex&&1!=cindex||new RGraph.HBar("cvs",e).Set("gutter.top",0).Set("gutter.left",120).Set("labels",t).Set("colors",a).Set("text.font","Verdana").Set("text.size",8).Set("vmargin",8).Draw()}function changeReport(e){(cindex+=e)>cmax&&(cindex=0),cindex<0&&(cindex=cmax),$("chart").update('<img src="/img/db/loading.gif?6"/>'),$("ctitle").update(ctitle[cindex]),new Ajax.Request("/IndexServlet?report="+cindex+"&t="+currentTime(),{onSuccess:function(e){var t=e.responseText.split("~");clabel=t[0].split("|"),cdata=t[1].split("|");for(var a=0;a<cdata.length;a++)cdata[a]=parseInt(cdata[a]);loadReport(cdata,clabel,ccolor[cindex])}})}function initSliderRes(e){var t=[],a=$$("#pl-"+e+" option");a.each(function(a){t.push('<div id="'+e+"-"+a.value+'" class="slide"><img alt="" title="'+a.text+"\" src='"+hSportImg[a.value]+"'/></div>")}),t.push('<div id="'+e+"-"+a[0].value+'" class="slide">'+hSportImg[a[0].value]+"</div>"),$$("#slider-"+e+" .content")[0].update(t.join(""));var l=hSliders.get("slider-"+e);if(l){var r=$$("#slider-"+e+" .slide");l.initialize(l.scroller,r,l.controls,l.options)}else(l=createSlider("slider-"+e,102,102,!0)).options.afterMove=function(){var t=l.current.id;$("pl-"+e).setValue(t.replace(e+"-","")),"sp"==e&&changeSport(!0)};l.moveTo($(e+"-"+a[0].value))}function changeSport(e){e?getPicklist("pl-cp"):hSliders.get("slider-sp").moveTo($("sp-"+$F("pl-sp")))}function getPicklist(e){if("pl-yr"!=e){var t=$("pl-sp").options.selectedIndex,a=$("pl-cp").options.selectedIndex,l=$("pl-ev").options.selectedIndex,r=$("pl-se").options.selectedIndex,s=null;"pl-sp"==e?s=treeItems[0]:"pl-cp"==e?s=treeItems[0][t+2]:"pl-ev"==e?s=treeItems[0][t+2][a+2]:"pl-se"==e?s=treeItems[0][t+2][a+2][l+2]:"pl-se2"==e&&(s=treeItems[0][t+2][a+2][l+2][r+2]);for(var n=new Array,i=null,d=null,u=2;u<s.length;u++)(i=s[u][1])&&(-1!=i.indexOf("_")&&(i=i.substring(i.lastIndexOf("_")+1)),d=s[u][0],n.push({value:i,text:d}));fillPicklistArray(e,n)}else{var o=$H({sp:$F("pl-sp"),cp:$F("pl-cp"),ev:$F("pl-ev"),se:$F("pl-se"),se2:$F("pl-se2")});new Ajax.Request("/ResultServlet?"+e,{onSuccess:function(e){fillPicklistXML(e)},parameters:o})}}function runResults(e){t1=currentTime();var t=null;if(e&&e instanceof Array){var a=e[0],l=e[1],r=e.length>2?e[2]:null,s=e.length>3?e[3]:null,n=e.length>4?e[4]:null;t=$H({sp:a,cp:l,ev:r,se:s,se2:n,yr:0})}else t=$H({sp:$F("pl-sp"),cp:$F("pl-cp"),ev:$F("pl-ev"),se:$F("pl-se"),se2:$F("pl-se2"),yr:$F("pl-yr")});const i=document.body.clientWidth<640,d=$("treeresults");d&&!i?(window.scrollTo(0,0),new Ajax.Updater(d,"/BrowseResults",{onComplete:handleRender,parameters:t})):window.location.href="/SearchResults?"+t.toQueryString()}function resetResults(){$("pl-sp").selectedIndex=0,changeSport()}var currentNodeLink=null;function treeLeafClick(e,t){if(0!=t.indexOf("link-"))if(0!=t.indexOf("calendar-")){var a=t.split("_");if(-1!=location.href.indexOf("/update/results"))return tValues.sp=a[0],tValues.cp=a[1],tValues.ev=a[2],tValues.se=a.length>3?a[3]:"",tValues.se2=a.length>4?a[4]:"",tValues.yr="10000",loadResult(),$(e).addClassName("selectednode"),null!=currentNodeLink&&$(currentNodeLink).removeClassName("selectednode"),void(currentNodeLink=e);$("treeresults")&&$("treeresults").update('<div class="loading"></div>'),runResults(a)}else location.href="/calendar/"+t.substring(9);else info(t.substring(5))}var isDate2=!1;function refreshDate(e){var t=$F("yr"+e),a=$F("mo"+e),l=$F("dt"+e);$("year"+e).update(t),""!=a?(a=(a=$("mo"+e).options[$("mo"+e).options.selectedIndex].text).substring(4).toUpperCase(),$("month"+e).update(a),$("month"+e).show(),$("year"+e).style.paddingTop="0px"):($("year"+e).style.paddingTop="25px",$("month"+e).hide(),l="",$("dt"+e).value=""),""!=l?($("day"+e).update(l),$("day"+e).show(),$("month"+e).style.paddingTop="0px"):($("day"+e).hide(),$("month"+e).style.paddingTop="20px")}function showDate2(){refreshDate(2),$("spanbutton").hide(),$("date2-1").show(),$("date2-2").show(),$("label1").show(),isDate2=!0}function runCalendar(){var e=[0,31,28,31,30,31,30,31,31,30,31,30,31];t1=currentTime();var t=$F("yr1"),a=$F("mo1"),l=$F("dt1"),r=$F("yr2"),s=$F("mo2"),n=$F("dt2");isDate2?(s=""==s?"12":s,n=""==n?e[parseInt(s)]:n):(r=t,s=""==a?"12":a,n=""==l?e[parseInt(s)]:l),a=""==a?"01":a,l=""==l?"01":l;var i=$H({dt1:t+a+l,dt2:r+s+n});window.location.href="/SearchCalendar?"+i.toQueryString()}function resetCalendar(){$("spanbutton").show(),$("date2-1").hide(),$("date2-2").hide(),$("label1").hide(),$("yr1").value=todayY,$("mo1").value=todayM,$("dt1").value=todayD,refreshDate(1),isDate2=!1}function initOlympics(e){var t="/OlympicsServlet?type="+(0==e.indexOf("summer")?"summer":"winter");new Ajax.Request(t,{onSuccess:fillPicklistXML,onFailure:function(e){}})}function changeModeOL(){$F("olt1")?($("summerfs").style.display="inline-block",$("winterfs").hide(),changeOlympics("summer-pl-ol")):($("summerfs").hide(),$("winterfs").style.display="inline-block",changeOlympics("winter-pl-ol"))}function changeOlympics(id){var isSummer=0==id.indexOf("summer"),code=isSummer?"summer":"winter",h=$H({ol:$F(code+"-pl-ol")});h.set("type",code),new Ajax.Request("/OlympicsServlet?tree=1",{onSuccess:function(response){eval(response.responseText),getPicklistOL(code+"-pl-sp"),updateSliderSp(code)},parameters:h}),new Ajax.Request("/OlympicsServlet?pl-cn",{onSuccess:function(e){fillPicklistXML(e)},parameters:h}),updateSliderOl(code)}function changeSportOL(e,t,a){if(a)getPicklistOL(t+"-pl-ev",!0);else{var l=hSliders.get("slider-"+t+"-sp");if(l){var r=$(t+"-sp-"+$F(t+"-pl-sp"));r&&l.moveTo(r)}}}function getPicklistOL(e){var t=0==e.indexOf("summer")?"summer":"winter",a=$(t+"-pl-sp").options.selectedIndex,l=$(t+"-pl-ev").options.selectedIndex,r=$(t+"-pl-se").options.selectedIndex,s=null;e==t+"-pl-sp"?s=treeItems[0]:e==t+"-pl-ev"?s=treeItems[0][a+2][2]:e==t+"-pl-se"?s=treeItems[0][a+2][2][l+2]:e==t+"-pl-se2"&&(s=treeItems[0][a+2][2][l+2][r+2]);var n=[],i=null,d=null;if(null!=s)for(var u=2;u<s.length;u++)(i=s[u][1])&&(-1!=i.indexOf("_")&&(i=i.substring(i.lastIndexOf("_")+1)),d=s[u][0],n.push({value:i,text:d}));e!=t+"-pl-sp"&&n.length>1&&n.push({value:0,text:"["+TX_ALL+"]"}),fillPicklistArray(e,n)}function updateSliderOl(e){var t=$$("#slider-"+e+"-ol .content")[0],a=['<div id="'+e+'-sl1" class="slide">'],l=-1,r=$F(e+"-pl-ol");$$("#"+e+"-pl-ol option").each(function(t){if(-1===t.value.indexOf(",")&&parseInt(t.value)>0){var s=new RegExp("(^|.*,)"+t.value+"(,.*|$)"),n=null;("0"==r||s.match(r))&&(n=(n=t.text).substring(n.indexOf(" - ")+3)+" "+n.substring(0,4),a.push(++l>0&&l%10==0?'</div><div class="slide">':""),a.push('<img alt="'+n+'" title="'+n+'" src="'+hOlympicsImg[t.value]+'" style="cursor:pointer;" onclick="slideOlClick(\''+e+"', '"+t.value+"');\"/>"))}}),a.push("</div>"),t.update(a.join(""));var s=hSliders.get("slider-"+e+"-ol"),n=$$("#slider-"+e+"-ol .slide");s.initialize(s.scroller,n,s.controls,s.options),s.moveTo($(e+"-sl1")),handleSliderArr("slider-"+e+"-ol")}function updateSliderSp(e){var t=$$("#slider-"+e+"-sp .content")[0],a=[];$$("#"+e+"-pl-sp option").each(function(t){a.push('<div id="'+e+"-sp-"+t.value+'" class="slide">'),a.push('<img alt="'+t.text+'" title="'+t.text+'" src="'+hSportImg[t.value]+'"/></div>')}),a.push("</div>"),t.update(a.join(""));var l=hSliders.get("slider-"+e+"-sp"),r=$$("#slider-"+e+"-sp .slide");l.options.afterMove=function(){$(e+"-pl-sp").setValue(l.current.id.replace(e+"-sp-","")),changeSportOL(null,e,!0),handleSliderArr("slider-"+e+"-sp")},l.initialize(l.scroller,r,l.controls,l.options),l.first(),handleSliderArr("slider-"+e+"-sp")}function slideOlClick(e,t){var a=$(e+"-pl-ol");a.value=t,changeOlympics(a.id)}function runOlympics(){t1=currentTime();var e=$("olt1").checked?$("sq1").checked:$("wq1").checked,t=$("olt1").checked?"summer":"winter",a=$H({ol:$F(t+"-pl-ol")});e?(a.set("sp",$F(t+"-pl-sp")),a.set("ev",$F(t+"-pl-ev")),a.set("se",$F(t+"-pl-se")),a.set("se2",$F(t+"-pl-se2"))):a.set("cn",$F(t+"-pl-cn")),window.location.href="/SearchOlympics?"+a.toQueryString()+"&type="+(e?"ind":"cnt")}function resetOlympics(){var e=!!$("olympics-individual");$("olt1").checked=!0,changeModeOL(),$("summer-pl-ol").selectedIndex=0,$("winter-pl-ol").selectedIndex=0,$("sq1").checked=!0,$("sq1").onclick(),$("wq1").checked=!0,$("wq1").onclick(),changeOlympics("summer-pl-ol",e),changeOlympics("winter-pl-ol",e)}var currentLeague=null,currentUtype=null;function initSliderUS(){var e=[];e.push('<div id="sl-nfl" class="slide" title="NFL" style="background-image:url(/img/db/nfl.gif)"></div>'),e.push('<div id="sl-nba" class="slide" style="background-image:url(/img/db/nba.gif)"></div>'),e.push('<div id="sl-nhl" class="slide" style="background-image:url(/img/db/nhl.gif)"></div>'),e.push('<div id="sl-mlb" class="slide" style="background-image:url(/img/db/mlb.gif)"></div>'),e.push('<div id="sl-nfl" class="slide" title="NFL" style="background-image:url(/img/db/nfl.gif)"></div>'),$$("#slider-league-img .content")[0].update(e.join("")),createSlider("slider-league-img",100,100,!0),hSliders.get("slider-league-img").options.afterMove=function(){changeLeague(hSliders.get("slider-league-img").current.id.replace("sl-",""),!0)}}function changeLeague(e,t){if(currentLeague=e,t){$("nfl").removeClassName("selected"),$("nba").removeClassName("selected"),$("nhl").removeClassName("selected"),$("mlb").removeClassName("selected"),$(e).addClassName("selected");var a="nfl"==e?1:"nba"==e?2:"nhl"==e?3:4;$("pl-hof-yr").update(tHofYr[a]),updateTip("pl-hof-yr"),updateSelectMult("pl-hof-yr"),$("pl-championships-yr").update(tChampYr[a]),updateTip("pl-championships-yr"),updateSelectMult("pl-championships-yr"),$("pl-retnum-tm").update(tTm[a]),updateTip("pl-retnum-tm"),updateSelectMult("pl-retnum-tm"),$("pl-teamstadiums-tm").update(tTm[a]),updateTip("pl-teamstadiums-tm"),updateSelectMult("pl-teamstadiums-tm"),$("pl-records-tp1").options.selectedIndex=0,$("pl-records-ct").update(tRcCtI[a]),updateTip("pl-records-ct"),updateSelectMult("pl-records-ct"),$("pl-stats-yr").update(tStatsYr[a]),updateTip("pl-stats-yr"),updateSelectMult("pl-stats-yr"),$("pl-stats-ct").update(tStatsCtI[a]),updateTip("pl-stats-ct"),updateSelectMult("pl-stats-ct"),$("hof-position").value="",updateTip("hof-position"),updateSelectMult("hof-position"),$("hof-postip").title=tPos[a],updateTip("hof-postip"),updateSelectMult("hof-postip"),$("retnum-number").value="";for(var l=["Alltime/Career","Season","Series","Game"],r=new Array,s=0;s<l.length;s++)(1!=a&&4!=a||"Series"!=l[s])&&(r.push("'"+l[s]+"'"),l[s]='<option value="'+s+'">'+l[s]+"</option>");l.push('<option value="-">[All]</option>'),$("pl-records-tp2").update(l.join("")),$("lrecords-pf").update("nfl"==e?"Include postseason/Super Bowl":"Include playoffs")}else $("nfl").removeClassName("selected"),$("nba").removeClassName("selected"),$("nhl").removeClassName("selected"),$("mlb").removeClassName("selected"),$(e).addClassName("selected"),hSliders.get("slider-league-img").moveTo($("sl-"+e))}function changeModeUS(e){currentUtype=e=null!=e?e:"championships",["championships","records","stats","hof","retnum","teamstadiums"].each(function(e){$(e).removeClassName("selected"),$("f-"+e).hide()}),$(e).addClassName("selected"),$("f-"+e).show()}function changeRcType(){var e="nfl"==currentLeague?1:"nba"==currentLeague?2:"nhl"==currentLeague?3:4;$("pl-records-ct").update("t"==$("pl-records-tp1").value?tRcCtT[e]:"i"==$("pl-records-tp1").value?tRcCtI[e]:tRcCtA[e]),updateTip("pl-records-ct"),updateSelectMult("pl-records-ct")}function changeStType(){var e="nfl"==currentLeague?1:"nba"==currentLeague?2:"nhl"==currentLeague?3:4;$("pl-stats-ct").update("t"==$("pl-stats-type").value?tStatsCtT[e]:tStatsCtI[e]),updateTip("pl-stats-ct"),updateSelectMult("pl-stats-ct")}function runUSLeagues(){t1=currentTime();var e="nfl"==currentLeague?1:"nba"==currentLeague?2:"nhl"==currentLeague?3:4,t=new Hash;t.set("league",e),t.set("type",currentUtype),t.set("tm",$("pl-"+currentUtype+"-tm")?$F("pl-"+currentUtype+"-tm"):null),t.set("yr",$("pl-"+currentUtype+"-yr")?$F("pl-"+currentUtype+"-yr"):null),t.set("ct",$("pl-"+currentUtype+"-ct")?$F("pl-"+currentUtype+"-ct"):null),t.set("tp1",$("pl-"+currentUtype+"-tp1")?$F("pl-"+currentUtype+"-tp1"):null),t.set("tp2",$("pl-"+currentUtype+"-tp2")?$F("pl-"+currentUtype+"-tp2"):null),t.set("tpind","i"==$("pl-stats-type").value?"1":"0"),t.set("tptm","t"==$("pl-stats-type").value?"1":"0"),t.set("pf",$("records-pf").checked?"1":"0"),t.set("num",$F("retnum-number")),t.set("pos",$F("hof-position")),window.location.href="/SearchUSLeagues?"+t.toQueryString()}function resetUSLeagues(){changeModeUS(),changeLeague("nfl")}function dpatternFocus(){$F("dpattern")==TX_SEARCH2&&($("dpattern").addClassName("focus"),$("dpattern").value=""),$$("#content .selmultiple").each(function(e){$(e).style.visibility="hidden"})}function dpatternBlur(){""==$F("dpattern")&&($("dpattern").removeClassName("focus"),$("dpattern").value=TX_SEARCH2),$$("#content .selmultiple").each(function(e){$(e).style.visibility="visible"})}function directSearch(e){e&&e.id&&"LR"!=e.id?(Event.stopObserving($("dpattern"),"keyup"),location.href="/search?p="+e.id+"&entity"):13!=event.keyCode&&"LR"!=e.id||(location.href="/search?p="+escape($F("dpattern")))}function runSearch(){if(t1=currentTime(),""==$F("pattern"))alert("No search pattern defined.");else{var e=$("search-form").scope,t=[];$R(0,e.length-1).each(function(a){e[a].checked&&t.push(e[a].value)});var a=new Hash;a.set("pattern",$F("pattern")),a.set("max",""!=$F("max")?$F("max"):"0"),a.set("match",$F("match")),a.set("scope",t.join(",")),window.location.href="/Search?"+a.toQueryString()}}function resetSearch(){$("pattern").setValue("").activate(),$("match").checked=!1,$("max").value="100",$$(".scope input").each(function(e){$(e).checked=!0})}function auth(){""==$F("username")?$("username").focus():""==$F("password")?$("password").focus():$("flogin").submit()}function rauth(){$("username").value=$("rlogin").value,$("password").value=$("rpassword").value,auth()}function createAccount(){var e=[];if($$("#sp2 li").each(function(t){e.push($(t).id.replace("sp-",""))}),""==$("rlogin").value)return accountErr(TX_MLOGIN),void $("rlogin").focus();if(""==$("rpassword").value)return accountErr(TX_MPASSWORD),void $("rpassword").focus();if(""==$("rpassword2").value)return accountErr(TX_MCONFIRMPWD),void $("rpassword2").focus();if(""==$("remail").value)return accountErr(TX_MEMAIL),void $("remail").focus();if($("rpassword").value!=$("rpassword2").value)return accountErr(TX_PWDNOTMATCH),void $("rpassword2").focus();if(0!=e.length){$("rmsg").update('<div><img src="/img/db/loading.gif?6"/></div>').show();var t=$H();$$(".register input").each(function(e){t.set(e.id,e.value)}),t.set("rsports",e.join(",")),new Ajax.Request("/LoginServlet?create",{onSuccess:function(e){var t=e.responseText;/ERR\|.*/.match(t)?(accountErr(t.split("|")[1]),$("rlogin").focus()):($("rmsg").update(TX_ACCOUNT_CREATED).removeClassName("error").addClassName("success").show(),$("rlogin").focus())},parameters:t})}else accountErr(TX_MSPORTS)}function accountErr(e){$("rmsg").update(e).removeClassName("success").addClassName("error").show()}function moveSport(e,t,a){$(a).insert($(e)),Event.observe($(e),"click",function(){moveSport(this,a,t)})}var currentInputValue=null,currentAlias=null,currentId=null;function addPhoto(){if($("currentphotos").update('<div><img class="loading" src="/img/db/loading2.gif?6"/></div>'),""!=$F("emb")){var e=$H();e.set("embedded","1"),e.set("value",$F("emb")),e.set("source",$F("src")),new Ajax.Request("/ImageServlet?upload-photo&entity="+currentAlias+"&id="+currentId,{onSuccess:function(e){loadPhotos()},parameters:e})}else null!=fd&&(dzd.options.url="/ImageServlet?upload-photo&entity="+currentAlias+"&id="+currentId+"&source="+escape($F("src")),dzd.processFile(fd),fd=null),null!=fr&&(dzr.options.url="/ImageServlet?upload-photo&entity=RS&id="+tValues.id+"&source="+escape($F("src")),dzr.processFile(fr),fr=null);$("dz-file").update("<p>"+TX_CLICK_DRAGDROP+"</p>"),$("emb").value="",$("src").value=""}function loadPhotos(){$("currentphotos").update('<div><img class="loading" src="/img/db/loading2.gif?6"/></div>'),new Ajax.Updater("currentphotos","/ImageServlet?load&entity="+currentAlias+"&id="+currentId,{})}function removePhoto(e,t){new Ajax.Request("/ImageServlet?remove=1&id="+e+"&name="+t,{onSuccess:function(t){$("currentphoto-"+e).hide(),$("currentphoto-rm-"+e).hide()}})}function showLoading(){$("msg").update('<div><img src="/img/db/loading.gif?6"/></div>'),$("msg2")&&$("msg2").update('<div><img src="/img/db/loading2.gif?6"/></div>')}function showMessage(e){$("msg").style.color=e.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg").update("<div>"+e.replace(/ERR\:/i,"")+"</div>"),$("msg2")&&($("msg2").style.color=e.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg2").update("<div>"+e.replace(/ERR\:/i,"")+"</div>"))}function showWarning(){$("msg").update('<div class="warning">'+TX_MODIF_WARNING+"</div>"),$("msg2")&&$("msg2").update('<div class="warning">'+TX_MODIF_WARNING+"</div>")}var tValues=[],dzr=null,fr=null;function initUpdateResults(e){["sp","cp","ev","se","se2","yr","pl1","pl2"].each(function(e){new Ajax.Autocompleter(e,"ajaxsearch","/update/ajax/"+e,{paramName:"value",minChars:2,frequency:.05,afterUpdateElement:setValue})}),$$("#update-results input","#update-results textarea").each(function(e){"button"!=$(e).type&&"radio"!=$(e).type&&"yrfind"!=$(e).id&&($(e).value=$(e).name,$(e).title=$(e).name,$(e).addClassName("default"),Event.observe($(e),"focus",function(){$(this).value==$(this).name&&($(this).value=""),currentInputValue=$(this).value,$(this).select()}),Event.observe($(e),"blur",function(){currentInputValue!=$(this).value&&"emb"!=$(this).id&&"src"!=$(this).id&&showWarning(),""==$(this).value?($(this).removeClassName("completed").removeClassName("completed2"),$(this).value=$(this).name,tValues[$(this).id]=null):$(this).hasClassName("completed")||$(this).addClassName("completed2")}))}),(dzr=new Dropzone($("dz-file"),{url:"/",paramName:"photo-file",autoProcessQueue:!1,addRemoveLinks:!1})).on("addedfile",function(e){fr=e,$$("#imgzone p")[0].remove()}),dzr.on("success",function(e){loadPhotos()}),addRounds(),loadResValues(e),currentAlias="RS",$("fresults").style.width="700px"}function loadResValues(e){$("msg").update(""),$("msg2")&&$("msg2").update(),$("pagelink1").hide(),$("pagelink2").hide();var t=e.split("~");if(null!=t&&t.length>1&&($("modifmode1").checked=!0,$("modifmode2").checked=!0,tValues.sp=t[0],$("sp").value=t[1],$("sp").addClassName("completed"),tValues.cp=t[2],$("cp").value=t[3],$("cp").addClassName("completed"),tValues.ev=t[4],$("ev").value=t[5],updateType("ev",t[6]),$("ev").addClassName("completed"),""!=t[7]?(tValues.se=t[7],$("se").value=t[8],updateType("se",t[9]),$("se").addClassName("completed")):($("se").value=$("se").name,$("se").removeClassName("completed")),""!=t[10]?(tValues.se2=t[10],$("se2").value=t[11],updateType("se2",t[12]),$("se2").addClassName("completed")):($("se2").value=$("se2").name,$("se2").removeClassName("completed")),tValues.yr=t[13],$("yr").value=t[14],$("yr").addClassName("completed"),addRounds(!0),t.length>16)){tValues.id=t[15],$("id").value=tValues.id,currentId=tValues.id,null!=dzr&&($("dz-file").update("<p>"+TX_CLICK_DRAGDROP+"</p>"),fr=null),tValues.dt1=t[16],""!=t[16]?($("dt1").value=t[16],$("dt1").addClassName("completed2")):($("dt1").value=$("dt1").name,$("dt1").removeClassName("completed2")),tValues.dt2=t[17],""!=t[17]?($("dt2").value=t[17],$("dt2").addClassName("completed2")):($("dt2").value=$("dt2").name,$("dt2").removeClassName("completed2")),tValues.pl1=t[18],""!=t[18]?($("pl1").value=t[19],$("pl1").addClassName("completed").removeClassName("completed2")):($("pl1").value=$("pl1").name,$("pl1").removeClassName("completed").removeClassName("completed2")),tValues.pl2=t[20],""!=t[20]?($("pl2").value=t[21],$("pl2").addClassName("completed").removeClassName("completed2")):($("pl2").value=$("pl2").name,$("pl2").removeClassName("completed").removeClassName("completed2")),tValues.exa=t[22],""!=t[22]?($("exa").value=t[22],$("exa").addClassName("completed2")):($("exa").value=$("exa").name,$("exa").removeClassName("completed2")),tValues.cmt=t[23],""!=t[23]?($("cmt").value=t[23],$("cmt").addClassName("completed2")):($("cmt").value=$("cmt").name,$("cmt").removeClassName("completed2")),$("metadata").update(t[24]),tValues.inact=t[25],$("inact").checked="1"==t[25],tValues.draft=t[26],$("draft").checked="1"==t[26],tValues.nodate=t[27],$("nodate").checked="1"==t[27],tValues.noplace=t[28],$("noplace").checked="1"==t[29],tValues.exl=t[29],""!=t[29]?($("exl").value=t[29].replace(/\|/gi,"\r\n"),$("exl").addClassName("completed2")):($("exl").value=$("exl").name,$("exl").removeClassName("completed2"));for(var a=29,l=1;l<=20;l++)tValues["rk"+l]=t[++a],""!=tValues["rk"+l]?($("rk"+l).value=t[++a],$("rk"+l).addClassName("completed").removeClassName("completed2")):(a++,$("rk"+l).value=$("rk"+l).name,$("rk"+l).removeClassName("completed").removeClassName("completed2")),tValues["rs"+l]=t[++a],""!=tValues["rs"+l]?($("rs"+l).value=tValues["rs"+l],$("rs"+l).addClassName("completed2")):($("rs"+l).value=$("rs"+l).name,$("rs"+l).removeClassName("completed2"));tValues.pldel="";for(l=1;l<=pListCount;l++)tValues["rk"+l+"list"]=null;if(0==t[a+1].indexOf("rkl")){var r=(rkList=t[++a].substring(4)).split("#"),s=null,n=null,i=null,d=null,u=null;for(l=0;l<r.length;l++){s=r[l].split("|"),n=[];for(var o=0;o<s.length;o++)i=s[o].split(":")[0],d=s[o].split(":")[1],u=s[o].split(":")[3],n.push(i+":"+d+":"+u);for(;s.length>pListCount;)addPersonList();tValues["rk"+(l+1)+"list"]=n.join("|")}}else rkList=null;for(var c=a+1,p=1,m=[];tValues["rd"+p+"rt"];)tValues["rd"+p+"rt"]=null,tValues["rd"+p+"rk1"]=null,tValues["rd"+p+"rk2"]=null,tValues["rd"+p+"rk3"]=null,tValues["rd"+p+"rk4"]=null,tValues["rd"+p+"rk5"]=null,tValues["rd"+p+"pl1"]=null,tValues["rd"+p+"pl2"]=null,p++;for(tValues.rddel="",p=1;t[c]&&0==t[c].indexOf("rd-");){r=t[c].substring(3).split("|");$("rd"+p+"id").value=r[0],tValues["rd"+p+"rt"]=r[1],$("rd"+p+"rt").value=r[2],$("rd"+p+"rt").addClassName("completed"),tValues["rd"+p+"rk1"]=r[3],""!=r[4]?($("rd"+p+"rk1").value=r[4],$("rd"+p+"rk1").addClassName("completed")):($("rd"+p+"rk1").value=$("rd"+p+"rk1").name,$("rd"+p+"rk1").removeClassName("completed").removeClassName("completed2")),""!=r[5]?($("rd"+p+"rs1").value=r[5],$("rd"+p+"rs1").addClassName("completed2")):($("rd"+p+"rs1").value=$("rd"+p+"rs1").name,$("rd"+p+"rs1").removeClassName("completed2")),tValues["rd"+p+"rk2"]=r[6],""!=r[7]?($("rd"+p+"rk2").value=r[7],$("rd"+p+"rk2").addClassName("completed")):($("rd"+p+"rk2").value=$("rd"+p+"rk2").name,$("rd"+p+"rk2").removeClassName("completed").removeClassName("completed2")),""!=r[8]?($("rd"+p+"rs2").value=r[8],$("rd"+p+"rs2").addClassName("completed2")):($("rd"+p+"rs2").value=$("rd"+p+"rs2").name,$("rd"+p+"rs2").removeClassName("completed2")),tValues["rd"+p+"rk3"]=r[9],""!=r[10]?($("rd"+p+"rk3").value=r[10],$("rd"+p+"rk3").addClassName("completed")):($("rd"+p+"rk3").value=$("rd"+p+"rk3").name,$("rd"+p+"rk3").removeClassName("completed").removeClassName("completed2")),""!=r[11]?($("rd"+p+"rs3").value=r[11],$("rd"+p+"rs3").addClassName("completed2")):($("rd"+p+"rs3").value=$("rd"+p+"rs3").name,$("rd"+p+"rs3").removeClassName("completed2")),tValues["rd"+p+"rk4"]=r[12],""!=r[13]?($("rd"+p+"rk4").value=r[13],$("rd"+p+"rk4").addClassName("completed")):($("rd"+p+"rk4").value=$("rd"+p+"rk4").name,$("rd"+p+"rk4").removeClassName("completed").removeClassName("completed2")),""!=r[14]?($("rd"+p+"rs4").value=r[14],$("rd"+p+"rs4").addClassName("completed2")):($("rd"+p+"rs4").value=$("rd"+p+"rs4").name,$("rd"+p+"rs4").removeClassName("completed2")),tValues["rd"+p+"rk5"]=r[15],""!=r[16]?($("rd"+p+"rk5").value=r[16],$("rd"+p+"rk5").addClassName("completed")):($("rd"+p+"rk5").value=$("rd"+p+"rk5").name,$("rd"+p+"rk5").removeClassName("completed").removeClassName("completed2")),""!=r[17]?($("rd"+p+"rs5").value=r[17],$("rd"+p+"rs5").addClassName("completed2")):($("rd"+p+"rs5").value=$("rd"+p+"rs5").name,$("rd"+p+"rs5").removeClassName("completed2")),""!=r[18]?($("rd"+p+"dt1").value=r[18],$("rd"+p+"dt1").addClassName("completed2")):($("rd"+p+"dt1").value=$("rd"+p+"dt1").name,$("rd"+p+"dt1").removeClassName("completed2")),""!=r[19]?($("rd"+p+"dt2").value=r[19],$("rd"+p+"dt2").addClassName("completed2")):($("rd"+p+"dt2").value=$("rd"+p+"dt2").name,$("rd"+p+"dt2").removeClassName("completed2")),tValues["rd"+p+"pl1"]=r[20],""!=r[21]?($("rd"+p+"pl1").value=r[21],$("rd"+p+"pl1").addClassName("completed")):($("rd"+p+"pl1").value=$("rd"+p+"pl1").name,$("rd"+p+"pl1").removeClassName("completed").removeClassName("completed2")),tValues["rd"+p+"pl2"]=r[22],""!=r[23]?($("rd"+p+"pl2").value=r[23],$("rd"+p+"pl2").addClassName("completed")):($("rd"+p+"pl2").value=$("rd"+p+"pl2").name,$("rd"+p+"pl2").removeClassName("completed").removeClassName("completed2")),""!=r[24]?($("rd"+p+"exa").value=r[24],$("rd"+p+"exa").addClassName("completed2")):($("rd"+p+"exa").value=$("rd"+p+"exa").name,$("rd"+p+"exa").removeClassName("completed2")),""!=r[25]?($("rd"+p+"cmt").value=r[25],$("rd"+p+"cmt").addClassName("completed2")):($("rd"+p+"cmt").value=$("rd"+p+"cmt").name,$("rd"+p+"cmt").removeClassName("completed2")),m.push(replaceAll(t[c].substring(3),"|","~")),p%10==0&&addRounds(),p++,c++}var v=c;if(tValues.rdlist=m.join("|"),""!=t[v]&&($("pagelink1").href="/results/"+t[v],$("pagelink1").show(),v++,$("pagelink2").href="/result/"+t[v],$("pagelink2").show()),v++,$("otherids").update(),""!=t[v])if((r=t[v].split(",")).length>1){var h=[];for(l=0;l<r.length;l++)h.push("<a href=\"javascript:tValues['id']="+r[l]+";loadResult('direct');\""+(tValues.id==r[l]?' style="font-weight:bold;"':"")+">("+(l+1)+")</a>");$("otherids").update(h.join(" "))}loadPhotos()}}function clearValue(e,t){for(var a=e.split(","),l=0;l<a.length;l++)e=a[l],tValues[e]="",$(e).value="",$(e+"-l")&&(e+="-l",$(e).value=""),$(e).removeClassName("completed").removeClassName("completed2"),$(e).value=$(e).name;t&&$(e).focus(),showWarning()}function clearFieldset(e){if($$("#"+e+" input").each(function(e){clearValue(e.id)}),"rounds"==e)for(var t=1;t<=rdCount;t++)deleteRound(t);else"rankings"==e&&$("rk1").focus()}function setValue(e,t){var a=t.id.split("|");-1!=a[0].indexOf("-")?$(a[0]).value=a[1]:(tValues[e.id]=a[1],$(e).removeClassName("completed2").addClassName("completed"),a.length>2&&updateType(a[0],a[2]));var l=e.value.indexOf("[#");-1!=l&&(e.value=e.value.substring(0,l-1)),showWarning()}var currentTp=null;function updateType(e,t){(null!=tValues.se2&&"se2"==e||null!=tValues.se&&null==tValues.se2&&"se"==e||null!=tValues.ev&&null==tValues.se&&null==tValues.se2&&"ev"==e)&&(currentTp=parseInt(t)),["rk1","rk2","rk3","rk4","rk5","rk6","rk7","rk8","rk9","rk10","rk11","rk12","rk13","rk14","rk15","rk16","rk17","rk18","rk19","rk20"].each(function(e){Event.stopObserving($(e),"blur"),Event.stopObserving($(e),"keydown"),new Ajax.Autocompleter(e,"ajaxsearch","/update/ajax/"+(currentTp<10?"pr":50==currentTp?"tm":"cn")+(null!=tValues.sp?"-"+tValues.sp:""),{paramName:"value",minChars:2,frequency:.05,afterUpdateElement:setValue}),Event.observe($(e),"blur",function(){""==$(this).value?$(this).value=$(this).name:$(this).value==$(this).name||$(this).hasClassName("completed")||$(this).addClassName("completed2")})})}function loadResult(e){var t=$H({tp:e});["id","sp","cp","ev","se","se2","yr","yrfind"].each(function(e){t.set(e,tValues[e])}),new Ajax.Request("/update/load",{onSuccess:function(e){var t=e.responseText;""!=t&&(tValues.ev=null,tValues.se=null,tValues.se2=null,loadResValues(t))},parameters:t}),$("yrfind").value=""}function saveResult(){showLoading(),1==$("addmode1").checked&&(tValues.id=null,$("id").value="");for(var e=$H({sp:tValues.sp}),t=["id","sp","cp","ev","se","se2","yr","dt1","dt2","pl1","pl2","exa","cmt","img","exl"],a=1;a<=20;a++)t.push("rk"+a),t.push("rs"+a);for(a=1;a<=pListCount;a++)t.push("rk"+a+"list");saveRounds(),t.push("rdlist"),t.push("rddel"),t.push("pldel"),t.each(function(t){e.set(t,tValues[t]),$(t)&&($(t).hasClassName("completed")||$(t).hasClassName("completed2"))&&e.set(t+"-l",$F(t))}),e.set("inact",$("inact").checked?"1":"0"),e.set("draft",$("draft").checked?"1":"0"),e.set("nodate",$("nodate").checked?"1":"0"),e.set("noplace",$("noplace").checked?"1":"0"),new Ajax.Request("/update/save",{onSuccess:function(e){var t=e.responseText;-1==t.indexOf("ERR:")?(tValues.id=t.split("#")[0],$("id").value=tValues.id,showMessage(t.split("#")[1])):showMessage(t)},parameters:e})}function deleteResult(){setOpacity(.4),dQuestion.open(),$("confirmtxt").update(TX_CONFIRM+" ?"),Event.stopObserving($("confirmbtn"),"click"),Event.observe($("confirmbtn"),"click",function(){showLoading();var e=$H({id:tValues.id});new Ajax.Request("/update/delete",{onSuccess:function(e){showMessage(e.responseText)},parameters:e}),setOpacity(1),dQuestion.close()})}function loadDataTip(e){$("datatip").show(),$("datatip").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Updater($("datatip"),"/update/data/"+e)}var rkList=null,pListIndex=null,pListCount=20;function setInput(e){Event.stopObserving($(e),"blur"),Event.stopObserving($(e),"keydown");var t=/(plist.*|.*(rt|rk\d+|pl|pl1|pl2)$)/.match(e);if(t&=-1==e.indexOf("plist")||-1==e.indexOf("-index")){var a=null;a=/.*(rt|pl|pl1|pl2)$/.match(e)?"/update/ajax/"+(/.*rt$/.match(e)?"rt":"pl1"):"/update/ajax/"+(currentTp<10||0==e.indexOf("plist")?"pr":50==currentTp?"tm":"cn")+(null!=tValues.sp?"-"+tValues.sp:""),new Ajax.Autocompleter(e,"ajaxsearch"+(0==e.indexOf("plist")?"2":0==e.indexOf("rddlg")?"3":""),a,{paramName:"value",minChars:2,frequency:.05,afterUpdateElement:setValue})}""==$(e).value&&($(e).value=$(e).name),$(e).addClassName("default"),Event.observe($(e),"focus",function(){$(this).value==$(this).name&&($(this).value=""),$(this).select()}),Event.observe($(e),"blur",function(){""==$(this).value?($(this).value=$(this).name,$(this).removeClassName("completed").removeClassName("completed2")):$(this).value==$(this).name||$(this).hasClassName("completed")||$(this).addClassName("completed2")})}function initPersonList(e){var t=[],a=rkList?rkList.split("#"):null;a=(a=a?a[e-1]:null)?a.split("|"):null;for(var l=null,r=null,s=null,n=null,i=1;i<=pListCount;i++)a&&a[i-1]?(l=a[i-1].split(":")[0],r=a[i-1].split(":")[1],s=a[i-1].split(":")[2],n=a[i-1].split(":")[3]):(l=null,r=null,s="",n=""),tValues["plist_id"+i]=l&&null!=l?l:0,tValues["plist"+i]=r,t.push('<tr id="plrow'+i+'"><td><a href="javascript:deletePersonList('+i+');"><img title="'+TX_REMOVE+'" src="/img/delete.gif"/></a></td><td><input type="text" id="plist'+i+'-index" tabindex="'+(1e5+i)+'" name="Index" style="width:50px;" class="'+(null!=n&&""!=n?"completed2":"")+'" value="'+n+'"/></td><td><input type="text" id="plist'+i+'" tabindex="'+(100001+i)+'" name="Name #'+i+'" class="'+(null!=r?"completed":"")+'" value="'+s+'"/><a href="javascript:clearValue(\'plist'+i+"', true);\">[X]</a></td></tr>");$("plist").update("<table>"+t.join("")+"</table>"),$$("#plist input").each(function(e){setInput(e.id)}),pListIndex=e,$("plist-title").update("["+e+"]"),dPersonList.open(),setOpacity(.4)}function savePersonList(){for(var e=[],t=[],a=null,l=null,r=1;r<=pListCount;r++)$("plist"+r+"-index")&&(a=tValues["plist_id"+r],l=tValues["plist"+r],e.push(a+":"+(l&&""!=l?l:$("plist"+r).value)+":"+$("plist"+r+"-index").value.replace("Index","")),l&&""!=l&&-1==l.indexOf("Name #")&&t.push(a+":"+l+":"+$("plist"+r).value+":"+$("plist"+r+"-index").value.replace("Index","")));tValues["rk"+pListIndex+"list"]=e.join("|");var s=[];null!=rkList&&((s=rkList.split("#"))[pListIndex-1]=t.join("|")),rkList=s.join("#"),dPersonList.close(),setOpacity(1)}function addPersonList(){try{for(var e=pListCount+1;e<=pListCount+10;e++)$$("#plist table")[0].insert('<tr id="plrow'+e+'"><td><a href="javascript:deletePersonList('+e+');"><img title="'+TX_REMOVE+'" src="/img/delete.gif"/></a></td><td><input type="text" id="plist'+e+'-index" tabindex="'+(1e5+e)+'" name="Index" style="width:50px;"/></td><td><input type="text" id="plist'+e+'" tabindex="'+(100001+e)+'" name="Name #'+e+'"/><a href="javascript:clearValue(\'plist'+e+"', true);\">[X]</a></td></tr>"),setInput("plist"+e),setInput("plist"+e+"-index"),tValues["plist_id"+e]=0}catch(e){}pListCount+=10}function deletePersonList(e){""!=tValues["plist_id"+e]&&(tValues.pldel=(tValues.pldel?tValues.pldel+"|":"")+tValues["plist_id"+e]),$("plrow"+e).remove()}function displayShortcuts(){$$("#shortcutdiv a")[0].remove(),$("shortcuts1").show(),$("shortcuts2").show(),$("treediv").style.marginTop="80px"}var rdCount=0,rdDlgCurrent=0;function addRounds(e){try{var t=$$("#rounds table")[0];e&&(t.update(),rdCount=0);for(var a=null,l=rdCount+1;l<=rdCount+10;l++)(a=['<tr id="rdrow'+l+'">']).push('<td><a href="javascript:deleteRound('+l+');"><img title="'+TX_REMOVE+'" src="/img/delete.gif"/></a></td>'),a.push('<td><a href="javascript:openRoundDialog('+l+');"><img title="'+TX_OPEN_DIALOG+'" src="/img/update/dialog.png"/></a></td>'),a.push('<td><input type="hidden" id="rd'+l+'id"/></td>'),a.push('<td><input type="text" id="rd'+l+'rt" tabindex="'+(1e3+16*(l-1))+'" name="'+TX_TYPE+'" style="width:150px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'rk1" tabindex="'+(1001+16*(l-1))+'" name="'+TX_RANK1+'" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"rk1', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'rs1" tabindex="'+(1002+16*(l-1))+'" name="'+TX_RESULT_SCORE+'" style="width:90px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'rk2" tabindex="'+(1003+16*(l-1))+'" name="'+TX_RANK2+'" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"rk2', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'rs2" tabindex="'+(1004+16*(l-1))+'" name="'+TX_RESULT+'" style="width:90px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'rk3" tabindex="'+(1005+16*(l-1))+'" name="'+TX_RANK3+'" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"rk3', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'rs3" tabindex="'+(1006+16*(l-1))+'" name="'+TX_RESULT+'" style="width:90px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'rk4" tabindex="'+(1007+16*(l-1))+'" name="'+TX_RANK4+'" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"rk4', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'rs4" tabindex="'+(1008+16*(l-1))+'" name="'+TX_RESULT+'" style="width:90px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'rk5" tabindex="'+(1009+16*(l-1))+'" name="'+TX_RANK5+'" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"rk5', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'rs5" tabindex="'+(1010+16*(l-1))+'" name="'+TX_RESULT+'" style="width:90px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'dt1" tabindex="'+(1011+16*(l-1))+'" name="'+TX_DATE+' #1" style="width:80px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'dt2" tabindex="'+(1012+16*(l-1))+'" name="'+TX_DATE+' #2" style="width:80px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'pl1" tabindex="'+(1013+16*(l-1))+'" name="'+TX_PLACE+' #1" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"pl1', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'pl2" tabindex="'+(1014+16*(l-1))+'" name="'+TX_PLACE+' #2" style="width:200px;"/><a href="javascript:clearValue(\'rd'+l+"pl2', true);\">[X]</a></td>"),a.push('<td><input type="text" id="rd'+l+'exa" tabindex="'+(1015+16*(l-1))+'" name="'+TX_TIE+'" style="width:50px;"/></td>'),a.push('<td><input type="text" id="rd'+l+'cmt" tabindex="'+(1016+16*(l-1))+'" name="'+TX_COMMENT+'" style="width:150px;"/></td>'),a.push("</tr>"),t.insert(a.join(""));$$("#rounds input").each(function(e){setInput($(e).id)})}catch(e){}rdCount+=10}function deleteRound(e){$("rdrow"+e)&&(tValues.rddel=(tValues.rddel?tValues.rddel+"|":"")+$("rd"+e+"id").value,$("rdrow"+e).remove())}function saveRounds(){for(var e=[],t=[],a=null,l=null,r=1;r<=rdCount;r++)a=tValues["rd"+r+"rt"],(l=$("rd"+r+"rt"))&&(l.hasClassName("completed")||l.hasClassName("completed2"))&&((t=[$("rd"+r+"id").value]).push(a),t.push(l.value),t.push(tValues["rd"+r+"rk1"]),t.push($("rd"+r+"rk1").hasClassName("completed2")?$("rd"+r+"rk1").value:""),t.push($("rd"+r+"rs1").hasClassName("completed2")?$("rd"+r+"rs1").value:""),t.push(tValues["rd"+r+"rk2"]),t.push($("rd"+r+"rk2").hasClassName("completed2")?$("rd"+r+"rk2").value:""),t.push($("rd"+r+"rs2").hasClassName("completed2")?$("rd"+r+"rs2").value:""),t.push(tValues["rd"+r+"rk3"]),t.push($("rd"+r+"rk3").hasClassName("completed2")?$("rd"+r+"rk3").value:""),t.push($("rd"+r+"rs3").hasClassName("completed2")?$("rd"+r+"rs3").value:""),t.push(tValues["rd"+r+"rk4"]),t.push($("rd"+r+"rk4").hasClassName("completed2")?$("rd"+r+"rk4").value:""),t.push($("rd"+r+"rs4").hasClassName("completed2")?$("rd"+r+"rs4").value:""),t.push(tValues["rd"+r+"rk5"]),t.push($("rd"+r+"rk5").hasClassName("completed2")?$("rd"+r+"rk5").value:""),t.push($("rd"+r+"rs5").hasClassName("completed2")?$("rd"+r+"rs5").value:""),t.push($("rd"+r+"dt1").hasClassName("completed2")?$("rd"+r+"dt1").value:""),t.push($("rd"+r+"dt2").hasClassName("completed2")?$("rd"+r+"dt2").value:""),t.push(tValues["rd"+r+"pl1"]),t.push($("rd"+r+"pl1").value),t.push(tValues["rd"+r+"pl2"]),t.push($("rd"+r+"pl2").value),t.push($("rd"+r+"exa").hasClassName("completed2")?$("rd"+r+"exa").value:""),t.push($("rd"+r+"cmt").hasClassName("completed2")?$("rd"+r+"cmt").value:""),e.push(t.join("~")));tValues.rdlist=e.join("|")}function openRoundDialog(e,t){rdDlgCurrent=e,$$("#dlg-round input","#dlg-round textarea").each(function(e){setInput($(e).id)}),e="rd"+e;var a=null;$("rddlg-id").value=$(e+"id").value,["rt","rk1","rk2","rk3","rk4","rk5","pl1","pl2","rs1","rs2","rs3","rs4","rs5","dt1","dt2","exa","cmt"].each(function(t){/(rt|rk|pl).*$/.match(t)&&(tValues["rddlg-"+t]=tValues[e+t],tValues["rddlg-"+t]&&""!=tValues["rddlg-"+t]?$("rddlg-"+t).addClassName("completed"):$("rddlg-"+t).removeClassName("completed").removeClassName("completed2")),a=$(e+t).value,"cmt"==t&&(a=a.replace(/\¨/g,"\r\n")),$("rddlg-"+t).value=a,$("rddlg-"+t).hasClassName("completed")||(""!=$("rddlg-"+t).value&&a!=$(e+t).name?$("rddlg-"+t).addClassName("completed2"):$("rddlg-"+t).removeClassName("completed").removeClassName("completed2"))}),$("round-title").update("["+rdDlgCurrent+"]"),t||(setOpacity(.4),dRound.open())}function moveRound(e){rdDlgCurrent+e<1&&(e=0),openRoundDialog(rdDlgCurrent+e,1)}function copyRStoRD(){["rk1","rk2","rk3","rk4","rk5","pl2","rs1","rs2","rs3","rs4","rs5","dt2","exa"].each(function(e){/(rt|rk|pl).*$/.match(e)&&(tValues["rddlg-"+e]=tValues[e],tValues["rddlg-"+e]&&""!=tValues["rddlg-"+e]?$("rddlg-"+e).addClassName("completed"):$("rddlg-"+e).removeClassName("completed").removeClassName("completed2")),text=$(e).value,$("rddlg-"+e).value=text,$("rddlg-"+e).hasClassName("completed")||(""!=$("rddlg-"+e).value&&text!=$(e).name?$("rddlg-"+e).addClassName("completed2"):$("rddlg-"+e).removeClassName("completed").removeClassName("completed2"))})}function setRoundValues(){var e="rd"+rdDlgCurrent,t=null;["rt","rk1","rk2","rk3","rk4","rk5","pl1","pl2","rs1","rs2","rs3","rs4","rs5","dt1","dt2","exa","cmt"].each(function(a){/(rt|rk|pl).*$/.match(a)&&(tValues[e+a]=tValues["rddlg-"+a],tValues[e+a]&&""!=tValues[e+a]?$(e+a).addClassName("completed"):$(e+a).removeClassName("completed").removeClassName("completed2")),t=$("rddlg-"+a).value,"cmt"==a&&(t=t.replace(/[\n\r]/g,"¨")),$(e+a).value=t,$(e+a).hasClassName("completed")||(""!=$(e+a).value&&t!=$("rddlg-"+a).name?$(e+a).addClassName("completed2"):$(e+a).removeClassName("completed").removeClassName("completed2"))}),setOpacity(1),dRound.close()}function openCommentDialog(){if($("cmt").hasClassName("completed2")){var e=$("cmt").value.replace(/\|/g,"\r\n").split("·"),t=-1==e[0].indexOf("##");$("cmt-en").value=e[0].replace("##",""),$("cmt-fr").value=e.length>1?e[1].replace("##",""):"",/^EN\:/.match($("cmt-en").value)&&($("cmt-en").value=$("cmt-en").value.substring(3),$("cmt-fr").value=$("cmt-fr").value.substring(3)),$("cmtmode1").checked=!!t,$("cmtmode2").checked=!t}else $("cmt-en").value="",$("cmt-fr").value="",$("cmtmode1").checked=!0,$("cmtmode2").checked=!1;setOpacity(.4),dComment.open()}function saveComment(){var e=$("cmtmode1").checked?"":"##",t=""!=$("cmt-en").value?"EN:"+e+$("cmt-en").value:"";""!=(t=(t+=(""!=t?"·":"")+(""!=$("cmt-fr").value?"FR:"+e+$("cmt-fr").value:"")).replace(/[\n\r]/g,"|"))?($("cmt").value=t,$("cmt").addClassName("completed2")):($("cmt").value=$("cmt").name,$("cmt").removeClassName("completed2")),closeDialog(dComment)}var isMerge=null,isCopyPic=null,dzd=null,fd=null;function initUpdateData(){$$("#update-data input","#update-data textarea").each(function(e){$(e).id.lastIndexOf("-l")==$(e).id.length-2&&new Ajax.Autocompleter($(e).id,"ajaxsearch","/update/ajax/"+$(e).id,{paramName:"value",minChars:2,frequency:.05,afterUpdateElement:setValue}),"button"!=$(e).type&&($(e).value=$(e).name,$(e).addClassName("default"),Event.observe($(e),"focus",function(){$(this).value==$(this).name&&($(this).value=""),$(this).select()}),Event.observe($(e),"change",function(){$(this).removeClassName("completed").addClassName("completed2"),"emb"!=$(this).id&&"src"!=$(this).id&&showWarning()}),Event.observe($(e),"blur",function(){if(""==$(this).value){$(this).removeClassName("completed");var e=$(this).id.substring(0,$(this).id.lastIndexOf("-l"));$(e)&&($(e).value="")}else $(this).addClassName("completed");"rc-type1"==$(this).id&&updateRecordType($(this).value)}))}),(dzd=new Dropzone($("dz-file"),{url:"/",paramName:"photo-file",autoProcessQueue:!1,addRemoveLinks:!1})).on("addedfile",function(e){fd=e,$$("#imgzone p")[0].remove()}),dzd.on("success",function(e){loadPhotos()}),showPanel("PR")}function updateRecordType(e){["rc-rank1-l","rc-rank2-l","rc-rank3-l","rc-rank4-l","rc-rank5-l"].each(function(t){Event.stopObserving($(t),"blur"),Event.stopObserving($(t),"keydown"),new Ajax.Autocompleter(t,"ajaxsearch","/update/ajax/"+("individual"==e.toLowerCase()?"pr":"tm")+"-"+t,{paramName:"value",minChars:2,frequency:.05,afterUpdateElement:setValue}),Event.observe($(t),"blur",function(){""==$(this).value?$(this).value=$(this).name:$(this).addClassName("completed")})})}function showPanel(e){null!=currentAlias&&($("link-"+currentAlias).style.fontWeight="normal",$("table-"+currentAlias).hide()),$("link-"+e).style.fontWeight="bold",$("table-"+e).show(),currentAlias=e,loadEntity("last")}function loadEntity(e,t){var a=$H({action:e,alias:currentAlias,id:t||currentId});new Ajax.Request("/update/load-entity?t="+currentTime(),{onSuccess:function(e){setEntityValues(e.responseText)},parameters:a}),$("msg").update(),$("msg2")&&$("msg2").update()}function setEntityValues(e){var t=e.split("~");if(!(t.length<=1)){var a=0;currentId=t[a++],null!=dzd&&$("dz-file").update("<p>"+TX_CLICK_DRAGDROP+"</p>"),$("table-exl")&&$("table-exl").hide(),"PR"==currentAlias?($("pr-id").value=currentId,$("pr-lastname").value=t[a++],$("pr-firstname").value=t[a++],$("pr-sport").value=t[a++],$("pr-sport-l").value=t[a++],$("pr-team").value=t[a++],$("pr-team-l").value=t[a++],$("pr-country").value=t[a++],$("pr-country-l").value=t[a++],$("pr-link").value=t[a++],$("pr-link-l").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"CL"==currentAlias?($("cl-id").value=currentId,$("cl-sport").value=t[a++],$("cl-sport-l").value=t[a++],$("cl-championship").value=t[a++],$("cl-championship-l").value=t[a++],$("cl-event").value=t[a++],$("cl-event-l").value=t[a++],$("cl-subevent").value=t[a++],$("cl-subevent-l").value=t[a++],$("cl-subevent2").value=t[a++],$("cl-subevent2-l").value=t[a++],$("cl-complex").value=t[a++],$("cl-complex-l").value=t[a++],$("cl-city").value=t[a++],$("cl-city-l").value=t[a++],$("cl-country").value=t[a++],$("cl-country-l").value=t[a++],$("cl-date1").value=t[a++],$("cl-date2").value=t[a++]):"CP"==currentAlias?($("cp-id").value=currentId,$("cp-label").value=t[a++],$("cp-labelfr").value=t[a++],$("cp-index").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"CT"==currentAlias?($("ct-id").value=currentId,$("ct-label").value=t[a++],$("ct-labelfr").value=t[a++],$("ct-state").value=t[a++],$("ct-state-l").value=t[a++],$("ct-country").value=t[a++],$("ct-country-l").value=t[a++],$("ct-link").value=t[a++],$("ct-link-l").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"CX"==currentAlias?($("cx-id").value=currentId,$("cx-label").value=t[a++],$("cx-city").value=t[a++],$("cx-city-l").value=t[a++],$("cx-link").value=t[a++],$("cx-link-l").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"CB"==currentAlias?($("cb-id").value=currentId,$("cb-login").value=t[a++],$("cb-name").value=t[a++],$("cb-email").value=t[a++],$("cb-active").checked="1"==t[a++],$("cb-admin").checked="1"==t[a++],$("cb-sports").value=t[a++]):"CN"==currentAlias?($("cn-id").value=currentId,$("cn-label").value=t[a++],$("cn-labelfr").value=t[a++],$("cn-code").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"EV"==currentAlias?($("ev-id").value=currentId,$("ev-label").value=t[a++],$("ev-labelfr").value=t[a++],$("ev-type").value=t[a++],$("ev-type-l").value=t[a++],$("ev-index").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"OL"==currentAlias?($("ol-id").value=currentId,$("ol-year").value=t[a++],$("ol-year-l").value=t[a++],$("ol-city").value=t[a++],$("ol-city-l").value=t[a++],$("ol-type").value=t[a++],$("ol-start").value=t[a++],$("ol-end").value=t[a++],$("ol-sports").value=t[a++],$("ol-events").svalue=t[a++],$("ol-countries").value=t[a++],$("ol-persons").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"OR"==currentAlias?($("or-id").value=currentId,$("or-olympics").value=t[a++],$("or-olympics-l").value=t[a++],$("or-country").value=t[a++],$("or-country-l").value=t[a++],$("or-gold").value=t[a++],$("or-silver").value=t[a++],$("or-bronze").value=t[a++]):"RT"==currentAlias?($("rt-id").value=currentId,$("rt-label").value=t[a++],$("rt-labelfr").value=t[a++],$("rt-index").value=t[a++]):"SP"==currentAlias?($("sp-id").value=currentId,$("sp-label").value=t[a++],$("sp-labelfr").value=t[a++],$("sp-type").value=t[a++],$("sp-index").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"ST"==currentAlias?($("st-id").value=currentId,$("st-label").value=t[a++],$("st-labelfr").value=t[a++],$("st-code").value=t[a++],$("st-capital").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"TM"==currentAlias?($("tm-id").value=currentId,$("tm-label").value=t[a++],$("tm-sport").value=t[a++],$("tm-sport-l").value=t[a++],$("tm-country").value=t[a++],$("tm-country-l").value=t[a++],$("tm-league").value=t[a++],$("tm-league-l").value=t[a++],$("tm-conference").value=t[a++],$("tm-division").value=t[a++],$("tm-comment").value=t[a++],$("tm-year1").value=t[a++],$("tm-year2").value=t[a++],$("tm-link").value=t[a++],$("tm-link-l").value=t[a++],$("exl").value=t[a++],$("table-exl").show()):"YR"==currentAlias?($("yr-id").value=currentId,$("yr-label").value=t[a++]):"HF"==currentAlias?($("hf-id").value=currentId,$("hf-league").value=t[a++],$("hf-league-l").value=t[a++],$("hf-year").value=t[a++],$("hf-year-l").value=t[a++],$("hf-person").value=t[a++],$("hf-person-l").value=t[a++],$("hf-position").value=t[a++]):"RC"==currentAlias?($("rc-id").value=currentId,$("rc-sport").value=t[a++],$("rc-sport-l").value=t[a++],$("rc-championship").value=t[a++],$("rc-championship-l").value=t[a++],$("rc-event").value=t[a++],$("rc-event-l").value=t[a++],$("rc-subevent").value=t[a++],$("rc-subevent-l").value=t[a++],$("rc-type1").value=t[a++],$("rc-type2").value=t[a++],$("rc-city").value=t[a++],$("rc-city-l").value=t[a++],$("rc-label").value=t[a++],$("rc-rank1").value=t[a++],$("rc-rank1-l").value=t[a++],$("rc-record1").value=t[a++],$("rc-date1").value=t[a++],$("rc-rank2").value=t[a++],$("rc-rank2-l").value=t[a++],$("rc-record2").value=t[a++],$("rc-date2").value=t[a++],$("rc-rank3").value=t[a++],$("rc-rank3-l").value=t[a++],$("rc-record3").value=t[a++],$("rc-date3").value=t[a++],$("rc-rank4").value=t[a++],$("rc-rank4-l").value=t[a++],$("rc-record4").value=t[a++],$("rc-date4").value=t[a++],$("rc-rank5").value=t[a++],$("rc-rank5-l").value=t[a++],$("rc-record5").value=t[a++],$("rc-date5").value=t[a++],$("rc-counting").value=t[a++],$("rc-index").value=t[a++],$("rc-tie").value=t[a++],$("rc-comment").value=t[a++],updateRecordType($F("rc-type1"))):"RN"==currentAlias?($("rn-id").value=currentId,$("rn-league").value=t[a++],$("rn-league-l").value=t[a++],$("rn-team").value=t[a++],$("rn-team-l").value=t[a++],$("rn-person").value=t[a++],$("rn-person-l").value=t[a++],$("rn-year").value=t[a++],$("rn-year-l").value=t[a++],$("rn-number").value=t[a++]):"TS"==currentAlias?($("ts-id").value=currentId,$("ts-league").value=t[a++],$("ts-league-l").value=t[a++],$("ts-team").value=t[a++],$("ts-team-l").value=t[a++],$("ts-complex").value=t[a++],$("ts-complex-l").value=t[a++],$("ts-date1").value=t[a++],$("ts-date2").value=t[a++],$("ts-renamed").value=t[a++]):"WL"==currentAlias&&($("wl-id").value=currentId,$("wl-league").value=t[a++],$("wl-league-l").value=t[a++],$("wl-team").value=t[a++],$("wl-team-l").value=t[a++],$("wl-type").value=t[a++],$("wl-win").value=t[a++],$("wl-loss").value=t[a++],$("wl-tie").value=t[a++],$("wl-otloss").value=t[a++]),"PR"==currentAlias||"CT"==currentAlias||"CX"==currentAlias?(loadPhotos(),$("imgzone").show()):$("imgzone").hide(),$$("#update-data input").each(function(e){""!=$(e).value&&-1==$(e).id.indexOf("-id")?$(e).addClassName("completed"):$(e).removeClassName("completed")}),""!=$("exl").value?$("exl").addClassName("completed2"):$("exl").removeClassName("completed2"),["pr-link-l","ct-link-l","cx-link-l","tm-link-l"].each(function(e){0==e.toUpperCase().indexOf(currentAlias)&&(Event.stopObserving($(e),"keyup"),new Ajax.Autocompleter($(e).id,"ajaxsearch","/update/ajax/"+$(e).id+"~"+currentId,{paramName:"value",minChars:2,frequency:.05,afterUpdateElement:setValue}))})}}function newEntity(){var e=$$("#table-"+currentAlias+" input");e.each(function(e){$(e).value="",$(e).removeClassName("completed")}),currentId=null,e[1].focus()}function saveEntity(){showLoading();var e=$H({alias:currentAlias,id:currentId});$$("#table-"+currentAlias+" input").each(function(t){$(t).id.lastIndexOf("-l")<$(t).id.length-2&&e.set($(t).id,"checkbox"==$(t).type?$(t).checked:$(t).value)}),e.set("exl",$("exl").value),new Ajax.Request("/update/save-entity",{onSuccess:function(e){var t=e.responseText;if(showMessage(t),-1==t.indexOf("ERR:")){var a=t.substring(t.lastIndexOf("#")+1);$(currentAlias.toLowerCase()+"-id").value=a,currentId=a}},parameters:e})}function deleteEntity(){setOpacity(.4),dQuestion.open(),$("confirmtxt").update(TX_CONFIRM+" ?"),Event.stopObserving($("confirmbtn"),"click"),Event.observe($("confirmbtn"),"click",function(){showLoading();var e=$H({alias:currentAlias,id:currentId});new Ajax.Request("/update/delete-entity",{onSuccess:function(e){var t=e.responseText;loadEntity("previous"),showMessage(t)},parameters:e}),setOpacity(1),dQuestion.close()})}function copyEntity(){$(currentAlias.toLowerCase()+"-id").value="",currentId=null}function mergeEntity(e,t){setOpacity(.4),dQuestion.open(),new Ajax.Updater($("confirmtxt"),"/update/merge?confirm=1&id1="+e+"&id2="+t+"&alias="+currentAlias),Event.stopObserving($("confirmbtn"),"click"),Event.observe($("confirmbtn"),"click",function(){showLoading();var a=$H({alias:currentAlias,id1:e,id2:t});new Ajax.Request("/update/merge",{onSuccess:function(e){showMessage(e.responseText)},parameters:a}),setOpacity(1),dQuestion.close()})}function findEntity(e){isMerge=1==e,isCopyPic=2==e,setOpacity(.4),dFind.open(),$("fresults").update(""),$("fpattern").value="",$("fpattern").focus()}function searchEntity(){if(!($F("fpattern").length<2)){$("fresults").update('<img src="/img/db/loading.gif?6"/>');var e=$H({value:$F("fpattern")});new Ajax.Request("/update/ajax/"+currentAlias.toLowerCase(),{onSuccess:function(e){$("fresults").update(e.responseText),$$("#fresults li").each(function(e){Event.observe($(e),"click",function(){var e=$(this).id.split("|")[1];setOpacity(1),dFind.close(),"RS"==currentAlias?(tValues.id=e,loadResult("direct")):isMerge?mergeEntity(currentId,e):isCopyPic?copyPicture(currentId,e):$("update-pictures")?(loadPictures("direct",e),$("sport").selectedIndex=0):loadEntity("direct",e)})})},parameters:e})}}function loadOverview(){var e=$H({entity:$F("oventity"),sport:$F("ovsport"),count:$F("ovcount"),pattern:$F("ovpattern"),showimg:$("showimg").checked?"1":"0"});$("ovcontent").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Updater($("ovcontent"),"/update/load-overview",{parameters:e})}function setOverviewFlag(e,t){new Ajax.Request("/update/set-overview-flag?flag="+e+"&id="+t)}var dzp=null,fp=null;function initPictures(){(dzp=new Dropzone($("dz-file"),{url:"/",paramName:"f",autoProcessQueue:!1,addRemoveLinks:!1})).on("addedfile",function(e){fp=e,$("name-local").update(e.name),$("remove-local").show()}),dzp.on("success",function(e,t){loadPictures("direct"),$("year1").value="",$("year2").value=""}),changePictureType()}function changePictureType(){currentAlias=$F("type"),loadPictures("last"),"CP"==currentAlias||"EV"==currentAlias||"TM"==currentAlias?($("spcell1").show(),$("spcell2").show()):($("spcell1").hide(),$("spcell2").hide())}function removeLocalPicture(){dzp.removeFile(fp),$("name-local").update(),$("remove-local").hide()}function uploadPicture(){if(null!=fp){var e=$F("sport"),t=currentAlias,a=currentId;"CP"!=t&&"EV"!=t||""==e||(t="SP"+t,a=e+"-"+a),dzp.options.url="/ImageServlet?upload=1&entity="+t+"&id="+a+"&size="+($("size1").checked?"L":"S")+"&y1="+$F("year1")+"&y2="+$F("year2"),dzp.processFile(fp)}}function downloadPicture(){null!=$F("list-remote")&&(location.href="/ImageServlet?download=1&name="+$F("list-remote"))}function deletePicture(){null!=$F("list-remote")&&new Ajax.Request("/ImageServlet?remove=1&name="+$F("list-remote"),{onSuccess:function(e){loadPictures("direct")}})}function loadPicture(){$("img-remote").update('<img alt="-" src="'+(null!=$F("list-remote")?IMG_URL+$F("list-remote"):"/img/noimage.png")+'"/>')}function loadPictures(e,t){var a=$H({action:e,alias:currentAlias,id:t||currentId,sp:$F("sport")});new Ajax.Request("/update/load-entity?t="+currentTime(),{onSuccess:function(e){if(""!=e.responseText){var t=e.responseText.split("~");$("label-remote").update(t[1]+("TM"==currentAlias?'<span style="font-weight:normal;font-style:italic;"> - '+t[3]+"</span>":"")),$("nopic").checked="1"==t[t.length-1],currentId=t[0];var a=$F("sport"),l=currentAlias,r=currentId;"CP"!=l&&"EV"!=l||""==a||(l="SP"+l,r=a+"-"+r);var s=$H({entity:l,id:r,size:$("size1").checked?"L":"S"});new Ajax.Request("/ImageServlet?list=1",{onSuccess:function(e){var t=[];e.responseText.split(",").each(function(e){""!=e&&t.push('<option value="'+e+'">'+e+"</option>")}),$("list-remote").update(t.join("")),t.length>0&&($("list-remote").selectedIndex=0),loadPicture()},parameters:s})}},parameters:a})}function copyPicture(e,t){var a=$H({entity:currentAlias,id1:e,id2:t});new Ajax.Request("/ImageServlet?copy=1",{onSuccess:function(e){loadPictures("direct",t)},parameters:a})}function setNopic(){var e=$H({entity:currentAlias,id:currentId,value:$("nopic").checked?"1":"0"});new Ajax.Request("/ImageServlet?nopic=1",{onSuccess:function(e){},parameters:e})}var dzi=null,fi=null;function initImport(){(dzi=new Dropzone($("dz-file"),{url:"/",paramName:"f",autoProcessQueue:!1,addRemoveLinks:!1})).on("addedfile",function(e){fi=e,$("fname").update(e.name),$("processbtn").disabled=!1,$("updatebtn").disabled=!0}),dzi.on("sending",function(){$("report").update('<div><img src="/img/db/loading.gif?6"/></div>')}),dzi.on("success",function(e,t){/html$/.match(t)?$("report").update("<span style='color:green;font-weight:bold;'>"+TX_IMPORT_COMPLETE.replace("{1}","/update/execute-import?file="+t)+"</span>"):($("report").update(t),$("updatebtn").disabled=t.indexOf(TX_ERROR.toUpperCase()+":")>-1)})}function executeImport(e){null!=fi&&(dzi.options.url="/update/execute-import?type="+$F("type")+"&update="+e,dzi.processFile(fi),setTimeout(checkImportProgress,250),$("progressbar").show())}function checkImportProgress(){new Ajax.Request("check-progress-import?t="+currentTime(),{onSuccess:function(e){var t=e.responseText.split("|"),a=t[2];$("pgpercent").update(a+" % ("+t[0]+" / "+t[1]+")"),$("progress").style.width=2*a+"px",parseInt(a)<100&&setTimeout(checkImportProgress,250)}})}function loadTemplate(e){location.href="/update/load-template?type="+$F("type")+"&ext="+e}function executeQuery(e){var t=9==e,a=t?"ovcontent":"qresults",l="/update/execute-query?index="+e+(!t&&$("rcsv").checked?"&csv=1":"")+(t?"&year="+$F("year")+"&sport="+$F("ovsport"):"");-1==e&&(l+="&query="+escape($F("query"))),!t&&$("rcsv").checked?location.href=l:($(a).update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Request(l,{onSuccess:function(e){$(a).update(e.responseText);var t=$(a).down("td").innerHTML;t=replaceAll(t,"&nbsp;"," "),t=replaceAll(t,"&lt;","<"),t=replaceAll(t,"&gt;",">"),$("query").value=t}}))}var currentExtLinkEntity=null;function loadExtLinks(){var e=$H({sport:$F("elsport"),count:$F("elcount"),idmax:$F("elidmax"),pattern:$F("elpattern"),entity:$F("elentity"),includechecked:$("elincludechecked").checked?"1":"0"});$("elcontent").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Updater($("elcontent"),"/update/load-extlinks",{parameters:e}),currentExtLinkEntity=$F("elentity"),$("msg").update(),$("msg2")&&$("msg2").update()}function checkAllLinks(){$$("#elcontent input").each(function(e){$(e).checked=!0})}function addExtLink(e){var t=[],a=$$("#el-"+e+" td");t.push('<tr><td style="display:none;">0</td>'),t.push("<td>"+a[1].innerHTML+"</td>"),t.push("<td>"+a[2].innerHTML+"</td>"),t.push('<td><input type="text" style="width:60px;"/></td>'),t.push('<td><input type="text" style="width:500px;"/></td>'),t.push('<td><input type="checkbox"/></td><td/></tr>'),$("el-"+e).insert({after:t.join("")})}function modifyExtLink(e){var t=$$("#el-"+e+" td");t[3].innerHTML='<input type="text" value="'+t[3].innerHTML+'" style="width:60px;"/>',t[4].innerHTML='<input type="text" value="'+t[4].down("a").href+'" style="width:500px;"/>'}function removeExtLink(e){var t=$$("#el-"+e+" td");new Ajax.Request("/update/delete-extlink",{onSuccess:function(t){$("el-"+e).remove()},parameters:$H({id:t[0].innerHTML})})}function saveExtLinks(){var e=[];$$("#elcontent tbody tr").each(function(t){var a=$(t).getElementsByTagName("input"),l=$(t).getElementsByTagName("td"),r=l[0].innerHTML,s=l[1].innerHTML;1==a.length?e.push(r+"~"+(a[0].checked?"1":"0")):""!=a[0].value&&e.push(r+"~"+s+"~"+a[0].value+"~"+a[1].value+"~"+(a[2].checked?"1":"0"))}),new Ajax.Request("/update/save-extlinks",{onSuccess:function(e){var t=e.responseText;$("msg").style.color=t.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg").update("<div>"+t.replace(/^ERR\:/i,"")+"</div>"),loadExtLinks()},parameters:$H({entity:currentExtLinkEntity,value:e.join("|")})})}function updateLinksAuto(){setOpacity(.4),dQuestion.open(),$("confirmtxt").update(TX_CONFIRM+" ?"),Event.stopObserving($("confirmbtn"),"click"),Event.observe($("confirmbtn"),"click",function(){setOpacity(1),dQuestion.close(),$("elcontent").update('<img src="/img/db/loading.gif?6"/>');var e=$H({sport:$F("elsport"),count:$F("elcount"),idmax:$F("elidmax"),pattern:$F("elpattern"),entity:$F("elentity"),includechecked:$("elincludechecked").checked?"1":"0"});new Ajax.Request("/update/updateauto-extlinks",{onSuccess:function(e){var t=e.responseText;$("msg").style.color=t.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg").update("<div>"+t.replace(/^ERR\:/i,"")+"</div>"),loadExtLinks()},parameters:e})})}var currentTranslationEntity=null;function loadTranslations(){var e=$H({range:$F("trrange"),pattern:$F("trpattern"),entity:$F("trentity"),includechecked:$("trincludechecked").checked?"1":"0"});$("trcontent").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Updater($("trcontent"),"/update/load-translations",{parameters:e}),currentTranslationEntity=$F("trentity")}function checkAllTranslations(){$$("#trcontent input").each(function(e){$(e).checked=!0})}function saveTranslations(){var e=[];$$("#trcontent tbody tr").each(function(t){var a=$(t).getElementsByTagName("input")[0],l=$(t).getElementsByTagName("td");e.push(l[0].innerHTML+"~"+l[1].innerHTML+"~"+(a.checked?"1":"0"))}),new Ajax.Request("/update/save-translations",{onSuccess:function(e){var t=e.responseText;$("msg").style.color=t.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg").update("<div>"+t.replace(/^ERR\:/i,"")+"</div>"),loadTranslations()},parameters:$H({entity:currentTranslationEntity,value:e.join("|")})})}function loadFolders(){new Ajax.Updater($("list1"),"/update/load-folders"),$("list2").update(),$("sp").value="",$("cp").value="",$("ev1").value="",$("ev2").value="",$("ev3").value="",$("cb1").checked=!1,$("cb2").checked=!1,$("cb3").checked=!1}function moveFolder(e,t){for(var a=null,l=null,r=$(e).options.length-1;r>=0;r--)(a=$(e).options[r]).selected&&($(t).options.add(a),a.selected=!1,l=a.value.split(","),$("sp").value=l[0],l.length>1&&($("cp").value=l[1],l.length>2&&($("ev1").value=l[2],l.length>3&&($("ev2").value=l[3],l.length>4&&($("ev3").value=l[4])))))}function saveFolders(){var e=[];$$("#list2 option").each(function(t){e.push($(t).value)}),new Ajax.Request("/update/save-folders",{onSuccess:function(e){var t=e.responseText;$("msg").style.color=t.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg").update("<div>"+t.replace(/^ERR\:/i,"")+"</div>"),loadFolders()},parameters:$H({list:e.join("~"),sp:$F("sp"),cp:$F("cp"),ev1:$F("ev1"),ev2:$F("ev2"),ev3:$F("ev3"),cb1:$("cb1").checked?"1":"0",cb2:$("cb2").checked?"1":"0",cb3:$("cb3").checked?"1":"0"})})}function loadErrors(){$("ercontent").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Updater($("ercontent"),"/update/load-errors")}function removeError(e){$("ercontent").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Request("/update/remove-error",{onSuccess:function(e){loadErrors()},parameters:$H({value:e})}),new Ajax.Updater($("ercontent"),"/update/remove-error")}function loadRedirections(){$("recontent").update('<img src="/img/db/loading.gif?6"/>'),new Ajax.Updater($("recontent"),"/update/load-redirections")}function saveRedirections(){var e=[];$$("#recontent tbody tr").each(function(t){var a=$(t).getElementsByTagName("input"),l=$(t).getElementsByTagName("td")[0].innerHTML;e.push(l+"~"+a[0].value+"~"+a[1].value)}),new Ajax.Request("/update/save-redirections",{onSuccess:function(e){var t=e.responseText;$("msg").style.color=t.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg").update("<div>"+t.replace(/^ERR\:/i,"")+"</div>"),loadRedirections()},parameters:$H({value:e.join("|")})})}function addRedirection(e){var t=[];t.push('<tr><td style="display:none;">0</td>'),t.push('<td><input type="text" style="width:450px;"/></td>'),t.push('<td><input type="text" style="width:450px;"/></td></tr>'),$("re-"+e).insert({after:t.join("")})}function saveConfig(){$("msg2").update('<div><img src="/img/db/loading.gif?6"/></div>');var e=$H();$$("#tconfig input, #tconfig textarea").each(function(t){e.set("p_"+$(t).id,$(t).value)}),e.set("new",$("configadd").value),new Ajax.Request("/update/save-config",{onSuccess:function(e){var t=e.responseText;$("msg2").style.color=t.indexOf("ERR:")>-1?"#F00":"#0A0",$("msg2").update("<div>"+t.replace(/^ERR\:/i,"")+"</div>")},parameters:e})}function toggleSearchM(){$("shmenu").removeClassName("displayed"),$("headertop").toggleClassName("displayed"),$("dpattern").focus()}function toggleMenuM(){$("headertop").removeClassName("displayed"),$("shmenu").toggleClassName("displayed")}